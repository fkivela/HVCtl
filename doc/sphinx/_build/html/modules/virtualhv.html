
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>virtualhv &#8212; HVCtl  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="RS-232 control protocol" href="../protocol.html" />
    <link rel="prev" title="virtualconnection" href="virtualconnection.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-hvctl.virtualhv">
<span id="virtualhv"></span><h1><a class="reference internal" href="#module-hvctl.virtualhv" title="hvctl.virtualhv"><code class="xref py py-mod docutils literal notranslate"><span class="pre">virtualhv</span></code></a><a class="headerlink" href="#module-hvctl.virtualhv" title="Permalink to this headline">¶</a></h1>
<p>This module defines the <a class="reference internal" href="#hvctl.virtualhv.VirtualHV" title="hvctl.virtualhv.VirtualHV"><code class="xref py py-class docutils literal notranslate"><span class="pre">VirtualHV</span></code></a> class.</p>
<dl class="class">
<dt id="hvctl.virtualhv.VirtualHV">
<em class="property">class </em><code class="sig-prename descclassname">hvctl.virtualhv.</code><code class="sig-name descname">VirtualHV</code><a class="headerlink" href="#hvctl.virtualhv.VirtualHV" title="Permalink to this definition">¶</a></dt>
<dd><p>A virtual high voltage generator.</p>
<p>This class simulates a HV generator that can be communicated with
through  a serial connection. This makes it possible to test
HVCtl without access to a physical device.</p>
<dl class="attribute">
<dt id="hvctl.virtualhv.VirtualHV.connection">
<code class="sig-name descname">connection</code><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>A simulated serial connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="virtualconnection.html#hvctl.virtualconnection.VirtualConnection" title="hvctl.virtualconnection.VirtualConnection">VirtualConnection</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="hvctl.virtualhv.VirtualHV.status">
<code class="sig-name descname">status</code><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.status" title="Permalink to this definition">¶</a></dt>
<dd><p>The status of the virtual HV generator.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#hvctl.api.Status" title="hvctl.api.Status">Status</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="hvctl.virtualhv.VirtualHV.time_of_last_command">
<code class="sig-name descname">time_of_last_command</code><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.time_of_last_command" title="Permalink to this definition">¶</a></dt>
<dd><p>This is initialized to <a class="reference external" href="https://docs.python.org/3/library/time.html#time.time" title="(in Python v3.8)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.time()</span></code></a> when a
<a class="reference internal" href="#hvctl.virtualhv.VirtualHV" title="hvctl.virtualhv.VirtualHV"><code class="xref py py-class docutils literal notranslate"><span class="pre">VirtualHV</span></code></a> object is created,
and updated to the current time every time a command is
sent to the virtual HV.</p>
<p>See <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.refresh_watchdog" title="hvctl.virtualhv.VirtualHV.refresh_watchdog"><code class="xref py py-attr docutils literal notranslate"><span class="pre">refresh_watchdog</span></code></a> for further details.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a new <a class="reference internal" href="#hvctl.virtualhv.VirtualHV" title="hvctl.virtualhv.VirtualHV"><code class="xref py py-class docutils literal notranslate"><span class="pre">VirtualHV</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.__enter__">
<code class="sig-name descname">__enter__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.__enter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Called upon entering a <code class="docutils literal notranslate"><span class="pre">with</span></code> block;
returns <em>self</em>.</p>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.__exit__">
<code class="sig-name descname">__exit__</code><span class="sig-paren">(</span><em class="sig-param">type_</em>, <em class="sig-param">value</em>, <em class="sig-param">traceback</em><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.__exit__" title="Permalink to this definition">¶</a></dt>
<dd><p>Called upon exiting a <code class="docutils literal notranslate"><span class="pre">with</span></code> block; calls
<a class="reference internal" href="#hvctl.virtualhv.VirtualHV.connection" title="hvctl.virtualhv.VirtualHV.connection"><code class="xref py py-attr docutils literal notranslate"><span class="pre">connection</span></code></a><a class="reference internal" href="virtualconnection.html#hvctl.virtualconnection.VirtualConnection.close" title="hvctl.virtualconnection.VirtualConnection.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">.close()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.get_voltage">
<code class="sig-name descname">get_voltage</code><span class="sig-paren">(</span><em class="sig-param">*args</em><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.get_voltage" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a <code class="docutils literal notranslate"><span class="pre">'get</span> <span class="pre">voltage'</span></code> command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> – These are ignored.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.voltage" title="hvctl.api.Status.voltage"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.voltage</span></code></a>, or 0 if <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_on_status" title="hvctl.api.Status.hv_on_status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_on_status</span></code></a> is <code class="docutils literal notranslate"><span class="pre">False</span></code> or
<a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.inhibition" title="hvctl.api.Status.inhibition"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.inhibition</span></code></a> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.get_current">
<code class="sig-name descname">get_current</code><span class="sig-paren">(</span><em class="sig-param">*args</em><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.get_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a <code class="docutils literal notranslate"><span class="pre">'get</span> <span class="pre">current'</span></code> command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> – These are ignored.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.current" title="hvctl.api.Status.current"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.current</span></code></a>, or 0 if <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_on_status" title="hvctl.api.Status.hv_on_status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_on_status</span></code></a> is <code class="docutils literal notranslate"><span class="pre">False</span></code> or
<a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.inhibition" title="hvctl.api.Status.inhibition"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.inhibition</span></code></a> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.set_voltage">
<code class="sig-name descname">set_voltage</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.set_voltage" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a <code class="docutils literal notranslate"><span class="pre">'set</span> <span class="pre">voltage'</span></code> command.</p>
<p>Sets <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.voltage" title="hvctl.api.Status.voltage"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.voltage</span></code></a> to <em>value</em> and <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.regulation" title="hvctl.api.Status.regulation"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.regulation</span></code></a> to <code class="docutils literal notranslate"><span class="pre">'voltage'</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>value</em>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.set_current">
<code class="sig-name descname">set_current</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.set_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a <code class="docutils literal notranslate"><span class="pre">'set</span> <span class="pre">current'</span></code> command.</p>
<p>Sets <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.current" title="hvctl.api.Status.current"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.current</span></code></a> to <em>value</em> and <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.regulation" title="hvctl.api.Status.regulation"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.regulation</span></code></a> to <code class="docutils literal notranslate"><span class="pre">'current'</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The new value of <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.current" title="hvctl.api.Status.current"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.current</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.hv_on">
<code class="sig-name descname">hv_on</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.hv_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a <code class="docutils literal notranslate"><span class="pre">'HV</span> <span class="pre">on'</span></code> command.</p>
<p>This method first sets <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_on_command" title="hvctl.api.Status.hv_on_command"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_on_command</span></code></a> to <code class="docutils literal notranslate"><span class="pre">bool(value)</span></code>.
<a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_on_status" title="hvctl.api.Status.hv_on_status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_on_status</span></code></a> is then set to <code class="docutils literal notranslate"><span class="pre">True</span></code>,
if the following conditions are met:</p>
<ul class="simple">
<li><p>The old value of <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_on_command" title="hvctl.api.Status.hv_on_command"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_on_command</span></code></a> was <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p>The new value of <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_on_command" title="hvctl.api.Status.hv_on_command"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_on_command</span></code></a> is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.inhibition" title="hvctl.api.Status.inhibition"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.inhibition</span></code></a> is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.fault" title="hvctl.api.Status.fault"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.fault</span></code></a> is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>value</em>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.hv_off">
<code class="sig-name descname">hv_off</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.hv_off" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a <code class="docutils literal notranslate"><span class="pre">'HV</span> <span class="pre">off'</span></code> command.</p>
<p>This method first sets <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_off_command" title="hvctl.api.Status.hv_off_command"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_off_command</span></code></a> to <code class="docutils literal notranslate"><span class="pre">bool(value)</span></code>.
<a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_on_status" title="hvctl.api.Status.hv_on_status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_on_status</span></code></a> is then set to <code class="docutils literal notranslate"><span class="pre">False</span></code>,
if the following conditions are met:</p>
<ul class="simple">
<li><p>The old value of <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_off_command" title="hvctl.api.Status.hv_off_command"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_off_command</span></code></a> was <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p>The new value of <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_off_command" title="hvctl.api.Status.hv_off_command"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_off_command</span></code></a> is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>value</em>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.set_mode">
<code class="sig-name descname">set_mode</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.set_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a <code class="docutils literal notranslate"><span class="pre">'set</span> <span class="pre">mode'</span></code> command.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">bool(value)</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>,
<a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.mode" title="hvctl.api.Status.mode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.mode</span></code></a> is set to <code class="docutils literal notranslate"><span class="pre">'local'</span></code>;
otherwise it is set to <code class="docutils literal notranslate"><span class="pre">'remote'</span></code>.</p>
<p>Setting the mode to <code class="docutils literal notranslate"><span class="pre">'local'</span></code> also sets
<a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_on_status" title="hvctl.api.Status.hv_on_status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_on_status</span></code></a> to <code class="docutils literal notranslate"><span class="pre">False</span></code>,
if it is not already.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>value</em>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.set_inhibition">
<code class="sig-name descname">set_inhibition</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.set_inhibition" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a <code class="docutils literal notranslate"><span class="pre">'set</span> <span class="pre">inhibition'</span></code> command.</p>
<p>Sets <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.inhibition" title="hvctl.api.Status.inhibition"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.inhibition</span></code></a> to <code class="docutils literal notranslate"><span class="pre">bool(value)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>value</em>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.get_status">
<code class="sig-name descname">get_status</code><span class="sig-paren">(</span><em class="sig-param">_</em><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.get_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a <code class="docutils literal notranslate"><span class="pre">'get</span> <span class="pre">status'</span></code> command.</p>
<p>This method returns an 8-bit unsigned integer describing the
current status of the virtual HV generator (excluding voltage
and current).
The values of the bits in the number are copied from the
attributes of this object in the following manner:</p>
<dl class="field-list simple">
<dt class="field-odd">Bit 0</dt>
<dd class="field-odd"><p><a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.inhibition" title="hvctl.api.Status.inhibition"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.inhibition</span></code></a></p>
</dd>
<dt class="field-even">Bit 1</dt>
<dd class="field-even"><p><a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.mode" title="hvctl.api.Status.mode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.mode</span></code></a>
(<code class="docutils literal notranslate"><span class="pre">1</span></code> for <code class="docutils literal notranslate"><span class="pre">'local'</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span></code> for <code class="docutils literal notranslate"><span class="pre">'remote'</span></code>)</p>
</dd>
<dt class="field-odd">Bit 2</dt>
<dd class="field-odd"><p><a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_off_command" title="hvctl.api.Status.hv_off_command"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_off_command</span></code></a></p>
</dd>
<dt class="field-even">Bit 3</dt>
<dd class="field-even"><p><a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_on_command" title="hvctl.api.Status.hv_on_command"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_on_command</span></code></a></p>
</dd>
<dt class="field-odd">Bit 4</dt>
<dd class="field-odd"><p><a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_on_status" title="hvctl.api.Status.hv_on_status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_on_status</span></code></a></p>
</dd>
<dt class="field-even">Bit 5</dt>
<dd class="field-even"><p><a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.interlock" title="hvctl.api.Status.interlock"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.interlock</span></code></a>
(<code class="docutils literal notranslate"><span class="pre">1</span></code> for <code class="docutils literal notranslate"><span class="pre">'open'</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span></code> for <code class="docutils literal notranslate"><span class="pre">'closed'</span></code>)</p>
</dd>
<dt class="field-odd">Bit 6</dt>
<dd class="field-odd"><p><a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.fault" title="hvctl.api.Status.fault"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.fault</span></code></a></p>
</dd>
<dt class="field-even">Bit 7</dt>
<dd class="field-even"><p><a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.regulation" title="hvctl.api.Status.regulation"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.regulation</span></code></a>
(<code class="docutils literal notranslate"><span class="pre">1</span></code> for <code class="docutils literal notranslate"><span class="pre">'voltage'</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span></code> for <code class="docutils literal notranslate"><span class="pre">'current'</span></code>)</p>
</dd>
</dl>
<p>Since <code class="docutils literal notranslate"><span class="pre">True</span></code> equals <code class="docutils literal notranslate"><span class="pre">1</span></code> in Python, attributes with a value
of <code class="docutils literal notranslate"><span class="pre">True</span></code> will set their respective bit to <code class="docutils literal notranslate"><span class="pre">1</span></code>,
and attributes with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> will set their bit
to <code class="docutils literal notranslate"><span class="pre">0</span></code>.
The bits are in big-endian order.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> in <code class="docutils literal notranslate"><span class="pre">range(256)</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.process">
<code class="sig-name descname">process</code><span class="sig-paren">(</span><em class="sig-param">input_</em><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse <em>input_</em> into a command and execute it.</p>
<p>This method executes the following steps:</p>
<ol class="arabic simple">
<li><p>Call <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.refresh_watchdog" title="hvctl.virtualhv.VirtualHV.refresh_watchdog"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_watchdog()</span></code></a>.</p></li>
<li><p>Turn <em>input_</em> into a <a class="reference internal" href="message.html#hvctl.message.Message" title="hvctl.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a>
object with <a class="reference internal" href="message.html#hvctl.message.Message.from_bytes" title="hvctl.message.Message.from_bytes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.from_bytes()</span></code></a>.</p></li>
<li><p>Generate a method name by replacing <code class="docutils literal notranslate"><span class="pre">'</span> <span class="pre">'</span></code> with
<code class="docutils literal notranslate"><span class="pre">'_'</span></code> in <a class="reference internal" href="message.html#hvctl.message.Message" title="hvctl.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">message.command</span></code></a>
and call a method with that name.</p></li>
<li><p>Create a new <a class="reference internal" href="message.html#hvctl.message.Message" title="hvctl.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> object.
The <a class="reference internal" href="message.html#hvctl.message.Message.command" title="hvctl.message.Message.command"><code class="xref py py-attr docutils literal notranslate"><span class="pre">command</span></code></a>
attribute of the new object is copied from the input
message and the
<a class="reference internal" href="message.html#hvctl.message.Message.command" title="hvctl.message.Message.command"><code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code></a> attribute is
the value returned by the method that was called.</p></li>
<li><p>Convert the new message to a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> object with
<a class="reference internal" href="message.html#hvctl.message.Message.__bytes__" title="hvctl.message.Message.__bytes__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.__bytes__()</span></code></a> and return the bytes.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_</strong> – A <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> object created by
<a class="reference internal" href="message.html#hvctl.message.Message.__bytes__" title="hvctl.message.Message.__bytes__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.__bytes__()</span></code></a>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> object that can be passed to
<a class="reference internal" href="message.html#hvctl.message.Message.from_bytes" title="hvctl.message.Message.from_bytes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.from_bytes()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.open_interlock">
<code class="sig-name descname">open_interlock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.open_interlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate opening the interlock.</p>
<p>Sets <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.interlock" title="hvctl.api.Status.interlock"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.interlock</span></code></a> to <code class="docutils literal notranslate"><span class="pre">'open'</span></code>, <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.fault" title="hvctl.api.Status.fault"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.fault</span></code></a> to <code class="docutils literal notranslate"><span class="pre">True</span></code>
and <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_on_status" title="hvctl.api.Status.hv_on_status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_on_status</span></code></a> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.close_interlock">
<code class="sig-name descname">close_interlock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.close_interlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate closing the interlock.</p>
<p>Sets <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.interlock" title="hvctl.api.Status.interlock"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.interlock</span></code></a> to <code class="docutils literal notranslate"><span class="pre">'closed'</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.reset_fault">
<code class="sig-name descname">reset_fault</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.reset_fault" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate resetting the fault state through the HV off button
on the front panel of the HV generator.</p>
<p>Sets <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.fault" title="hvctl.api.Status.fault"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.fault</span></code></a> to <code class="docutils literal notranslate"><span class="pre">'False'</span></code>, if <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.interlock" title="hvctl.api.Status.interlock"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.interlock</span></code></a> is <code class="docutils literal notranslate"><span class="pre">'closed'</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="hvctl.virtualhv.VirtualHV.refresh_watchdog">
<code class="sig-name descname">refresh_watchdog</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#hvctl.virtualhv.VirtualHV.refresh_watchdog" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to local mode if over 5 seconds has elapsed since
the last command was sent.</p>
<p>The HV generator contains a watchdog device that automatically
turns the HV off and switches the generator to local mode if
the generator doesn’t receive any commands for 5 seconds.</p>
<p>VirtualHV emulates this functionality with this method,
which compares <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.time_of_last_command" title="hvctl.virtualhv.VirtualHV.time_of_last_command"><code class="xref py py-attr docutils literal notranslate"><span class="pre">time_of_last_command</span></code></a> to the current
time. If the difference between these two times is more than 5
seconds, <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.mode" title="hvctl.api.Status.mode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.mode</span></code></a> is set to <code class="docutils literal notranslate"><span class="pre">'local'</span></code>
and <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.status" title="hvctl.virtualhv.VirtualHV.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a><a class="reference internal" href="api.html#hvctl.api.Status.hv_on_status" title="hvctl.api.Status.hv_on_status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">.hv_on_status</span></code></a> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.
Finally, <a class="reference internal" href="#hvctl.virtualhv.VirtualHV.time_of_last_command" title="hvctl.virtualhv.VirtualHV.time_of_last_command"><code class="xref py py-attr docutils literal notranslate"><span class="pre">time_of_last_command</span></code></a> is updated to the current
time.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">HVCtl</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="config.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="message.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">message</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">api</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="widgets.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">widgets</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="command_line_ui.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">command_line_ui</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced_tui.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">advanced_tui</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="status_format.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">status_format</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="queuefile.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">queuefile</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="virtualconnection.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">virtualconnection</span></code></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">virtualhv</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../protocol.html">RS-232 control protocol</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Modules</a><ul>
      <li>Previous: <a href="virtualconnection.html" title="previous chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">virtualconnection</span></code></a></li>
      <li>Next: <a href="../protocol.html" title="next chapter">RS-232 control protocol</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, University of Helsinki Fusor Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/modules/virtualhv.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>